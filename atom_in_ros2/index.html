<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://lardemua.github.io/atom_documentation/atom_in_ros2/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>ATOM in ROS2 - ATOM Calibration Framework</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "ATOM in ROS2";
        var mkdocs_page_input_path = "atom_in_ros2.md";
        var mkdocs_page_url = "/atom_documentation/atom_in_ros2/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> ATOM Calibration Framework
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../getting_started/">Getting Started</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../procedures/">Calibration Procedures</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../examples/">Calibration Examples</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../evaluations/">Evaluation Procedures</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../multimedia/">Multimedia</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../acknowledgment/">Acknowledgment</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">ATOM Calibration Framework</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>ATOM in ROS2</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="atom-in-ros2">ATOM in ROS2</h1>
<ul>
<li><a href="#atom-in-ros2">ATOM in ROS2</a></li>
<li><a href="#prepare-shared-directory">Prepare shared directory</a></li>
<li><a href="#clone-required-packages">Clone required packages</a></li>
<li><a href="#prepare-docker-container">Prepare Docker container</a><ul>
<li><a href="#build-docker-image">Build Docker Image</a></li>
<li><a href="#start-docker-container">Start docker container</a></li>
</ul>
</li>
<li><a href="#build-atom-and-dependencies">Build Atom and dependencies</a></li>
<li><a href="#credits">Credits</a></li>
</ul>
<p>Atom was originally written for ROS1 and doesn't support ROS2 out-of-the-box. But the good news is it can be used within a container. You can easily pass your ROS2 bag to Atom, itâ€™ll be seamlessly <a href="https://github.com/lardemua/atom/pull/718">converted</a> to ROS1 bag.</p>
<h2 id="prepare-shared-directory">Prepare shared directory</h2>
<p>All the code, datasets and rosbags will be stored in the shared directory i.e. the directory you can access from both host (your computer) and the container. In this tutorial, we place a shared directory in your computer's home folder, but you are free to place it anywhere.</p>
<pre><code class="language-bash">mkdir -p ~/noetic_shared_dir/calib_ws/src &amp;&amp; mkdir -p ~/noetic_shared_dir/datasets &amp;&amp; mkdir -p ~/noetic_shared_dir/bagfiles
</code></pre>
<h2 id="clone-required-packages">Clone required packages</h2>
<p>We need clone several packages into the workspace source folder:</p>
<ul>
<li><code>Atom</code> calibration package</li>
<li><code>rosbags</code> packages. Required to perform a ROS2-to-ROS1 bag conversion</li>
</ul>
<pre><code class="language-bash">cd ~/noetic_shared_dir/calib_ws/src &amp;&amp; git clone git@github.com:lardemua/atom.git &amp;&amp; git clone https://github.com/cmrobotics/rosbags.git
</code></pre>
<h2 id="prepare-docker-container">Prepare Docker container</h2>
<h3 id="build-docker-image">Build Docker Image</h3>
<pre><code class="language-bash">docker build --tag=ros:noetic ~/noetic_shared_dir/calib_ws/src/atom/dockerfiles/noetic
</code></pre>
<h3 id="start-docker-container">Start docker container</h3>
<pre><code class="language-bash">xhost + &amp;&amp; docker container run --rm --privileged -it --network=host --ipc=host \
--volume=/dev:/dev --volume=$HOME/noetic_shared_dir:/home/ros1/ \
--volume=/tmp/.X11-unix:/tmp/.X11-unix \
--env=&quot;QT_X11_NO_MITSHM=1&quot; --env=&quot;DISPLAY&quot; --volume=&quot;$HOME/.Xauthority:/root/.Xauthority:rw&quot; -u 1000 \
--name noetic -w /home/ros1 ros:noetic
</code></pre>
<h2 id="build-atom-and-dependencies">Build Atom and dependencies</h2>
<p>After you have container running, it is time to build the calibration software.</p>
<p>First, you need to build <code>rosbags</code> package as it is not a <code>catkin</code> package. Go to <code>rosbag</code> folder and run:</p>
<pre><code class="language-bash">python3 -m pip install .
</code></pre>
<p>To install the rest of the packages go to the <code>calib_ws</code> directory and run:</p>
<pre><code class="language-bash">catkin_make
</code></pre>
<p>That will build every package in the workspace.</p>
<p>Do not forget to source your calibration workspace at the end:</p>
<pre><code class="language-bash">source devel/setup.bash
</code></pre>
<h2 id="calibration">Calibration</h2>
<p>Mostly, the calibration process for ROS2 bag shares steps with ROS1 <a href="https://lardemua.github.io/atom_documentation/procedures/">calibration</a>.</p>
<p>The only difference comes from the fact that we are unable to build ROS2 robot description packages in ROS1 container, so we need to pass robot model file as an absolute path.</p>
<ol>
<li>
<p>Keep in mind while preparing your calibration config file that <code>description_file</code> should be an absolute path to your robot model, not a relative one.</p>
</li>
<li>
<p>Also pass path to the robot description file  (<code>description_file:=&lt;path_to_robot_model&gt;</code>) alognside with other arguments in <a href="https://lardemua.github.io/atom_documentation/procedures/#collect-data">Collect Data</a> step.</p>
</li>
</ol>
<h2 id="credits">Credits</h2>
<p>Thanks to <a href="https://github.com/cmrobotics">Coalescent Mobile Robotics</a> for the contribution.</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
