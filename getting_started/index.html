<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://lardemua.github.io/atom_documentation/getting_started/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Getting Started - ATOM Calibration Framework</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Getting Started";
        var mkdocs_page_input_path = "getting_started.md";
        var mkdocs_page_url = "/atom_documentation/getting_started/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> ATOM Calibration Framework
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Getting Started</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#clone-atom-repository-and-install-dependencies">Clone ATOM repository and install dependencies</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#clone-rviz-fork">Clone RViz fork</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#set-environment-variables">Set environment variables</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#calibration-patterns">Calibration patterns</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#basic-usage">Basic usage</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#create-a-calibration-package">Create a calibration package</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#configure-a-calibration-package">Configure a calibration package</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#set-initial-estimate">Set initial estimate</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#collect-data">Collect data</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#dataset-playback">Dataset playback</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#calibrate-sensors">Calibrate sensors</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../procedures/">Calibration Procedures</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../examples/">Calibration Examples</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../evaluations/">Evaluation Procedures</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../multimedia/">Multimedia</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../acknowledgment/">Acknowledgment</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">ATOM Calibration Framework</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li><li>Getting Started</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="getting-started">Getting started</h2>
<ul>
<li><a href="#installation">Installation</a><ul>
<li><a href="#clone-atom-repository-and-install-dependencies">Clone ATOM repository and install dependencies</a></li>
<li><a href="#clone-rviz-fork">Clone RViz fork</a></li>
<li><a href="#set-environment-variables">Set environment variables</a></li>
</ul>
</li>
<li><a href="#calibration-patterns">Calibration patterns</a></li>
<li><a href="#basic-usage">Basic usage</a><ul>
<li><a href="#create-a-calibration-package">Create a calibration package</a></li>
<li><a href="#configure-a-calibration-package">Configure a calibration package</a></li>
<li><a href="#set-initial-estimate">Set initial estimate</a></li>
<li><a href="#collect-data">Collect data</a></li>
<li><a href="#dataset-playback">Dataset playback</a></li>
<li><a href="#calibrate-sensors">Calibrate sensors</a></li>
</ul>
</li>
</ul>
<h3 id="installation">Installation</h3>
<h4 id="clone-atom-repository-and-install-dependencies">Clone ATOM repository and install dependencies</h4>
<p>Clone the atom repository to a directory soemwhere inside your catkin workspace:</p>
<pre><code>git clone https://github.com/lardemua/atom
</code></pre>
<p>then install requirements.</p>
<pre><code>sudo pip3 install -r requirements.txt
</code></pre>
<h4 id="clone-rviz-fork">Clone RViz fork</h4>
<p>Some of the functionalities in ATOM, i.e., depth semi-automatic labeling and depth manual labeling, make use of a 
<a href="https://github.com/miguelriemoliveira/rviz">special RViz fork</a> that allows for mouse clicking functionality. </p>
<p>If you are interested in using one of these functionalities you have to clone it to your catkin workspace:</p>
<pre><code>git clone https://github.com/miguelriemoliveira/rviz
</code></pre>
<div class="admonition warning">
<p class="admonition-title">To be integrated into RVIZ</p>
<p>The functionality extends the image display to suport mouse clicking. We are working on integrating this in the RViz main branch, but this is not available yet.
More information here:</p>
<p><a href="https://github.com/ros-visualization/rviz/issues/916">https://github.com/ros-visualization/rviz/issues/916</a></p>
<p><a href="https://github.com/ros-visualization/rviz/pull/1737">https://github.com/ros-visualization/rviz/pull/1737</a></p>
</div>
<h4 id="set-environment-variables">Set environment variables</h4>
<p>We often use two enviroment variables to allow for easy cross machine access to bagfiles and datasets. If you want to use these you can also add these lines to your <em>.bashrc</em> or <em>.zhsrc</em>, adjusting the paths according to your case:</p>
<pre><code class="language-bash">export ROS_BAGS=&quot;$HOME/&lt;bagfiles&quot;
export ATOM_DATASETS=&quot;$HOME/datasets&quot;
</code></pre>
<p>and then you can refer to these environment variables when providing paths to atom scripts, e.g.:</p>
<pre><code class="language-bash">roslaunch &lt;my_robot_calibration&gt; calibrate.launch dataset_file:=$ATOM_DATASETS/&lt;my_dataset&gt;/dataset.json
</code></pre>
<p>and you can also refer to them inside the <a href="https://github.com/lardemua/atlascar2/blob/0c065508f325fb57e0439c1ba2e00f9468cd73e7/atlascar2_calibration/calibration/config.yml#L14">calibration configuration file</a></p>
<h3 id="calibration-patterns">Calibration patterns</h3>
<p>We recomend the usage 
RGB cameras have a fully automatic pattern detection. It uses off the shelf <a href="https://docs.opencv.org/4.x/d9/d0c/group__calib3d.html#ga93efa9b0aa890de240ca32b11253dd4a">chessboard</a> or <a href="https://docs.opencv.org/4.x/df/d4a/tutorial_charuco_detection.html">charuco</a> calibration pattern detectors.</p>
<p>To calibrate our systems we purchased charuco calibration patterns from <a href="https://calib.io/products/charuco-targets?variant=9400455004207">calib.io</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Charuco boards are preferable to chessboard patterns, because of two main reasons: the first is that the charuco detection is more more efficient when compared to the chessboard detection; the second is that the charuco pattern is detected even if it is only partially visible in the image, which is very usefull when the sensors in your system have small overlapping fields of view.</p>
</div>
<h3 id="basic-usage">Basic usage</h3>
<p>Unlike most other calibration approaches, <strong>ATOM</strong> offers tools to address the complete calibration pipeline. These are
instructions for quick starting your robotic system calibration. If you need more details read through
the <a href="../procedures/">detailed description</a> below.</p>
<h4 id="create-a-calibration-package">Create a calibration package</h4>
<pre><code class="language-bash">rosrun atom_calibration create_calibration_pkg --name &lt;my_robot_calibration&gt;
</code></pre>
<h4 id="configure-a-calibration-package">Configure a calibration package</h4>
<p>Edit the file:</p>
<p>&lt;my_robot_calibration>/calibration/config.yml_ with your system information.</p>
<p>and then run:</p>
<pre><code class="language-bash">rosrun &lt;my_robot_calibration&gt; configure 
</code></pre>
<h4 id="set-initial-estimate">Set initial estimate</h4>
<p>ATOM provides interactive tools based on rviz that allow the user to set the pose of the sensors to be calibrated, while receiving visual feedback.</p>
<div class="admonition optional">
<p class="admonition-title">Optional</p>
<p>If you consider that your initial sensor poses are already accurate, you may skip this procedure.</p>
</div>
<p>To use launch:</p>
<pre><code class="language-bash">roslaunch &lt;my_robot_calibration&gt; set_initial_estimate.launch 
</code></pre>
<h4 id="collect-data">Collect data</h4>
<p>Collecting data produces an ATOM dataset, which is then used for calibrating the system.</p>
<pre><code class="language-bash">roslaunch &lt;my_robot_calibration&gt; collect_data.launch output_folder:=~/datasets/&lt;my_dataset&gt; 
</code></pre>
<h4 id="dataset-playback">Dataset playback</h4>
<p>Dataset playback offers the possibility to visualize and correct the labels automatically produced during the collection stage.</p>
<div class="admonition optional">
<p class="admonition-title">Optional</p>
<p>If you trust that the automatic labels are correct, you may skip this procedure.</p>
</div>
<p>First launch the visualizer:</p>
<pre><code class="language-bash">roslaunch &lt;my_robot_calibration&gt; dataset_playback.launch
</code></pre>
<p>and then:</p>
<pre><code class="language-bash">rosrun atom_calibration dataset_playback -json $ATOM_DATASETS/&lt;my_robot_calibration&gt;/&lt;your_dataset&gt;/dataset.json -uic -si  -ow
</code></pre>
<h4 id="calibrate-sensors">Calibrate sensors</h4>
<p>Finally run an optimization that will calibrate your sensors:</p>
<pre><code class="language-bash">roslaunch &lt;my_robot_calibration&gt; dataset_playback.launch 
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href=".." class="btn btn-neutral float-left" title="Introduction"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../procedures/" class="btn btn-neutral float-right" title="Calibration Procedures">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../procedures/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
